// Fix for Angular Material v19 form field sizing issues
.additional-selection {
  opacity: 0.75;
  font-size: 0.75em;
}

.mat-form-field-no-margin {
  margin-top: 0px;
}

// Angular Material v19 compatibility fixes
.mat-mdc-form-field {
  width: 100%;
  
  // Ensure proper sizing for all form fields
  &.mat-form-field-appearance-fill {
    width: 100%;
  }
  
  // Fix for input field width
  .mat-mdc-text-field-wrapper {
    width: 100%;
  }
  
  // Fix for select field width
  .mat-mdc-select {
    width: 100%;
  }
  
  // Fix for textarea width
  .mat-mdc-input-element {
    width: 100%;
    box-sizing: border-box;
  }
}

// Ensure Bootstrap grid columns work properly with Angular Material
.app-flex-row {
  display: flex;
  flex-wrap: wrap;
  margin: 0 -15px;
  
  [class*="col-"] {
    padding: 0 15px;
    
    // Ensure form fields take full width of their container
    .mat-mdc-form-field {
      width: 100%;
      min-width: 0; // Prevent flex items from overflowing
    }
  }
}

// Fix for date picker fields that might be too narrow
.col-md-2 {
  .mat-mdc-form-field {
    min-width: 150px; // Ensure date fields have minimum width
  }
}

// Fix for button toggle groups
.mat-button-toggle-group {
  display: flex;
  flex-wrap: wrap;
  
  .mat-button-toggle {
    flex: 1;
    min-width: auto;
  }
}

// Fix for select dropdown width
.mat-mdc-select-panel {
  min-width: 100%;
}

// Fix for modal content to prevent overflow
.app-modal-content {
  overflow-x: hidden;
  width: 100%;
  
  // Make tabs narrow - each tab 1/9 of total page width
  .mat-mdc-tab-group {
    width: 100%;
    
    // Fix for tab header to be narrow
    .mat-mdc-tab-header {
      width: 100%;
      
      .mat-mdc-tab-header-pagination {
        display: none !important; // Hide pagination arrows if any
      }
      
      .mat-mdc-tab-label-container {
        width: auto; // Don't force full width
        flex: none; // Don't grow
        
        .mat-mdc-tab-list {
          width: auto; // Auto width for narrow tabs
          display: flex;
          justify-content: flex-start; // Align tabs to left
          
          .mat-mdc-tab {
            flex: none; // Don't grow to fill space
            width: calc(100vw / 9); // Each tab is 1/9 of viewport width
            max-width: calc(100vw / 9);
            min-width: calc(100vw / 9);
            
            .mat-mdc-tab-label {
              width: 100%;
              justify-content: center;
              padding: 0 8px; // Reduced padding for narrow tabs
              min-width: 0;
              font-size: 0.875rem; // Slightly smaller font
            }
          }
        }
      }
    }
    
    .mat-mdc-tab-body-wrapper {
      width: 100%;
    }
    
    .mat-mdc-tab-body-content {
      width: 100%;
      overflow-x: hidden;
    }
  }
}

// Fix for form field labels and hints
.mat-mdc-form-field-subscript-wrapper {
  width: 100%;
}

// Responsive fixes for smaller screens
@media (max-width: 768px) {
  .app-flex-row {
    [class*="col-md-"] {
      flex: 0 0 100%;
      max-width: 100%;
      margin-bottom: 16px;
    }
  }
  
  // Stack button toggles vertically on small screens
  .mat-button-toggle-group {
    flex-direction: column;
    
    .mat-button-toggle {
      width: 100%;
    }
  }
}

// Fix for dialog actions
.app-modal-actions {
  width: 100%;
  
  table {
    width: 100%;
    table-layout: fixed;
    
    td {
      vertical-align: middle;
    }
  }
}

// Additional fixes for Angular Material v19 specific issues
.mat-mdc-form-field-flex {
  width: 100%;
}

.mat-mdc-form-field-infix {
  width: 100%;
  min-width: 0;
}

// Fix for checkbox in select dropdown
.mat-mdc-option .mat-mdc-checkbox {
  margin-right: 8px;
}

// Ensure proper spacing between form rows
.app-flex-row + .app-flex-row {
  margin-top: 16px;
}

// Fix for mat-hint alignment
.mat-mdc-form-field-hint-wrapper {
  width: 100%;
}

// Fix for error messages
.mat-mdc-form-field-error-wrapper {
  width: 100%;
}

// Additional tab fixes for Angular Material v19 - narrow tabs
.mat-mdc-tab-group {
  // Override any default full-width behavior
  .mat-mdc-tab-header {
    .mat-mdc-tab-label-container {
      // Don't force full width for narrow tabs
      flex: none;
      width: auto;
      
      .mat-mdc-tab-list {
        // Keep tabs narrow and left-aligned
        justify-content: flex-start;
        width: auto;
        
        .mat-mdc-tab {
          // Fixed narrow width - 1/9 of viewport
          flex: none;
          width: calc(100vw / 9);
          max-width: calc(100vw / 9);
          min-width: calc(100vw / 9);
          
          // Center the tab text within narrow tab
          .mat-mdc-tab-label {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px; // Minimal padding for narrow tabs
            font-size: 0.875rem;
          }
        }
      }
    }
  }
}

// Fallback for older Angular Material versions - narrow tabs
.mat-tab-group {
  width: 100%;
  
  .mat-tab-header {
    width: 100%;
    
    .mat-tab-label-container {
      width: auto; // Don't force full width
      flex: none;
      
      .mat-tab-list {
        width: auto; // Auto width for narrow tabs
        display: flex;
        justify-content: flex-start;
        
        .mat-tab-label {
          flex: none;
          width: calc(100vw / 9); // 1/9 of viewport width
          max-width: calc(100vw / 9);
          min-width: calc(100vw / 9);
          justify-content: center;
          padding: 0 4px;
          font-size: 0.875rem;
        }
      }
    }
  }
}

// Force full width for dialog content
mat-dialog-content {
  width: 100%;
  max-width: 100%;
  
  .app-flex-row {
    width: 100%;
    
    .col-md-12 {
      width: 100%;
      padding: 0 15px;
    }
  }
}